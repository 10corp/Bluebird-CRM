<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr">
<head>
  <style type="text/css" media="all">@import url("/modules/system/system.base.css?mmy6gr");


<style type="text/css" media="all">@import url("/modules/system/system.base.css?mr6b49");
@import url("/modules/system/system.menus.css?mr6b49");
@import url("/modules/system/system.messages.css?mr6b49");
@import url("/modules/system/system.theme.css?mr6b49");</style>
<style type="text/css" media="all">@import url("/modules/field/theme/field.css?mr6b49");
@import url("/modules/node/node.css?mr6b49");
@import url("/modules/search/search.css?mr6b49");
@import url("/modules/user/user.css?mr6b49");</style>
<style type="text/css" media="all">@import url("/sites/all/modules/civicrm/drupal/../packages/jquery/jquery-ui-1.8.16/css/smoothness/jquery-ui-1.8.16.custom.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../packages/jquery/css/jquery.autocomplete.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../packages/jquery/css/menu.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../packages/jquery/css/token-input-facebook.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/DataTables/media/css/demo_table_jui.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../packages/jquery/css/dashboard.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../css/deprecate.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../css/civicrm.css?mr6b49");
@import url("/sites/all/modules/civicrm/drupal/../css/extras.css?mr6b49");</style>
<style type="text/css" media="screen,projection">@import url("/sites/default/themes/Bluebird/css/Bluebird.css?mr6b49");
@import url("/sites/default/themes/Bluebird/nyss_skin/skin.css?mr6b49");
@import url("/sites/default/themes/Bluebird/nyss_skin/civi-header.css?mr6b49");
@import url("/sites/default/themes/Bluebird/css/style.css?mr6b49");</style>
<link type="text/css" rel="stylesheet" media="screen,projection" href="/sites/default/themes/Bluebird/nyss_skin/tags/tags2.css" />
  <script type="text/javascript" src="/misc/jquery.js?v=1.4.4"></script>
<script type="text/javascript" src="/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="/misc/drupal.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/jquery.min.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/jquery-ui-1.8.16/js/jquery-ui-1.8.16.custom.min.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.autocomplete.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jstree/jquery.jstree.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.menu.pack.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.chainedSelects.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.contextMenu.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.tableHeader.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.textarearesizer.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.form.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.tokeninput.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.timeentry.pack.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.mousewheel.pack.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.toolTip.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/DataTables/media/js/jquery.dataTables.min.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.dashboard.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.FormNavigate.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.validate.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.civicrm-validate.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.ui.datepicker.validation.pack.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery-fieldselection.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.jeditable.mini.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.mustache.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.blockUI.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../js/rest.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../js/Common.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../js/jquery/jquery.crmeditable.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../js/jquery/jquery.crmaccordions.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../js/jquery/jquery.crmasmselect.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../js/jquery/jquery.crmtooltip.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../packages/jquery/plugins/jquery.cursorStart.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../../../../default/themes/Bluebird/scripts/bbUtils/bbUtils.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../../../../default/themes/Bluebird/scripts/bbJSsettings/bbhg.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../../../../default/themes/Bluebird/scripts/jquery.taggingAutocomplete/jquery.taggingAutocomplete.js?mr6b49"></script>
<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../../../../default/themes/Bluebird/scripts/jquery.infiniScroll/jquery.infiniScroll.js?mr6b49"></script>


<script type="text/javascript" src="/sites/all/modules/civicrm/drupal/../../../../default/themes/Bluebird/scripts/tagging/tag/selectize.min.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var cj = jQuery.noConflict(true);
//--><!]]>
</script>
<script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/message-manager.js?mr6b49"></script>
<script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/civi-header.js?mr6b49"></script>
<script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/general.js?mr6b49"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"Bluebird","theme_token":"Ag2phK3sqQgLiU8mRSfY_TkHDXB3zprxRERY8zL0ZtY","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/jquery.min.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/jquery-ui-1.8.16\/js\/jquery-ui-1.8.16.custom.min.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.autocomplete.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jstree\/jquery.jstree.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.menu.pack.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.chainedSelects.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.contextMenu.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.tableHeader.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.textarearesizer.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.form.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.tokeninput.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.timeentry.pack.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.mousewheel.pack.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.toolTip.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/DataTables\/media\/js\/jquery.dataTables.min.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.dashboard.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.FormNavigate.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.validate.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.civicrm-validate.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.ui.datepicker.validation.pack.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery-fieldselection.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.jeditable.mini.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.mustache.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.blockUI.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/js\/rest.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/js\/Common.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/js\/jquery\/jquery.crmeditable.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/js\/jquery\/jquery.crmaccordions.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/js\/jquery\/jquery.crmasmselect.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/js\/jquery\/jquery.crmtooltip.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jquery.cursorStart.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/..\/..\/..\/default\/themes\/Bluebird\/scripts\/bbUtils\/bbUtils.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/..\/..\/..\/default\/themes\/Bluebird\/scripts\/bbJSsettings\/bbhg.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/..\/..\/..\/default\/themes\/Bluebird\/scripts\/jquery.taggingAutocomplete\/jquery.taggingAutocomplete.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/..\/..\/..\/default\/themes\/Bluebird\/scripts\/jquery.infiniScroll\/jquery.infiniScroll.js":1,"sites\/all\/modules\/civicrm\/drupal\/..\/..\/..\/..\/default\/themes\/Bluebird\/scripts\/tagging\/tag\/JSTree.js":1,"0":1,"sites\/default\/themes\/Bluebird\/scripts\/message-manager.js":1,"sites\/default\/themes\/Bluebird\/scripts\/civi-header.js":1,"sites\/default\/themes\/Bluebird\/scripts\/general.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/jquery-ui-1.8.16\/css\/smoothness\/jquery-ui-1.8.16.custom.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/css\/jquery.autocomplete.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/jstree\/themes\/default\/style.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/css\/menu.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/css\/token-input-facebook.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/plugins\/DataTables\/media\/css\/demo_table_jui.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/packages\/jquery\/css\/dashboard.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/css\/deprecate.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/css\/civicrm.css":1,"sites\/all\/modules\/civicrm\/drupal\/..\/css\/extras.css":1,"sites\/default\/themes\/Bluebird\/css\/Bluebird.css":1,"sites\/default\/themes\/Bluebird\/nyss_skin\/skin.css":1,"sites\/default\/themes\/Bluebird\/nyss_skin\/civi-header.css":1,"sites\/default\/themes\/Bluebird\/css\/style.css":1}}});
//--><!]]>

</script>
<style type="text/css">

</style>
</head>
<body>
 <div id="wrapper">



<div class="demo">

    <div class="control-group">
      <select id="select-unified" class="contacts" placeholder="Search for a tag or keyword."></select>
      <!-- echo '<option value="' . htmlentities(cjoption['name']) . '" data-data="' . htmlentities(json_encode(cjoption)) . '">' . htmlentities(cjoption['name']) . '</option>'; -->
    </div>
    <!-- <div class="buttons">
      <input type="button" value="clear()" id="button-clear">
      <input type="button" value="clearOptions()" id="button-clearoptions">
      <input type="button" value="addOption()" id="button-addoption">
      <input type="button" value="addItem()" id="button-additem">
      <input type="button" value="setValue()" id="button-setvalue">
    </div> -->


    <script>

    var select = cj('#select-unified').selectize({
      // theme: 'repositories',
      valueField: 'id',
      labelField: 'name',
      searchField:  ['name', 'iso'],
      preload: true,
      maxItems: 1000,
      hideSelected: true,

      // scrollDuration: 100,
      // dataAttr: 'data-data'
      // options: [
      //   {id: 1, name: 'Spectrometer'},
      //   {id: 2, name: 'Star Chart'},
      //   {id: 3, name: 'Electrical Tape'}
      // ],
      create: true,
      // plugins: ['remove_button','restore_on_backspace'],
      plugins: ['remove_button'],

      delimiter: ',',
      persist: true,

      render: {
        option: function(item, escape) {
	  var path = '';
	  for (var i = 0, n = item.path.length; i < n; i++) {
	    path = path+('<span class="path-name">' + escape(item.path[i].name) + '</span><span class="slash">/</span>');
	  }
	  if (escape(item.parent) == 291) {
	    type_short = "I";
	    type= "Issue Code";
	  }else if (escape(item.parent) == 292) {
	    type_short = "K";
	    type= "keyword";
	  }else if (escape(item.parent) == 296){
	    type_short = "P";
	    type= "Position";
	  } ;
	  return '<div class="name">' +
	    '<span title="'+type+'"class="large-parent parent-'+escape(item.parent)+' ">'+type_short+'</span>' +
	    '<ul>' +
	      '<li>' + escape(item.name) + '</li>' +
	      (item.path ? '<li class="path">' + path + '</li>' : '') +
	    '</ul>' +
            '</div>';
	},
	item: function(item, escape) {
	  if (escape(item.parent) == 291) {
	    type_short = "I";
	    type= "Issue Code";
	  }else if (escape(item.parent) == 292) {
	    type_short = "K";
	    type= "keyword";
	  }else if (escape(item.parent) == 296){
	    type_short = "P";
	    type= "Position";
	  } ;
	  return '<div class="item" data-value="'+escape(item.id)+'"><span title="'+type+'" class="parent-'+escape(item.parent)+'">'+type_short+'</span>'+escape(item.name)+'</div>';
        }


      },
      score: function(search) {
        var score = this.getScoreFunction(search);
        return function(item) {
          return score(item) * (1 + Math.min(item.watchers / 100, 1));
        };
      },
      load: function(query, callback) {
        // if (!query.length) return callback();
	cj.ajax({
          // http://sd99_dev/civicrm/ajax/tag/tree?call_uri=http%3A%2F%2Fsd99_dev%2Fsites%2Fdefault%2Fthemes%2FBluebird%2Fscripts%2Ftest.php
          url: 'localtagdata.json',
          type: 'GET',
          error: function() {
            callback();
          },
          success: function(res) {
            callback(res);
          }
        });
      },
      onItemRemove: function(values) {
	console.log("removed: "+values);

	//return confirm(values.length > 1 ? 'Are you sure you want to remove these ' + values.length + ' items?' : 'Are you sure you want to remove "' + values[0] + '"?');
      },
      onOptionAdd: function(values) {
	// console.log("created: "+values);
	// return confirm(values.length > 1 ? 'Are you sure you want to add these ' + values.length + ' items?' : 'Are you sure you want to add "' + values[0] + '"?');
      },
      onItemAdd: function(values) {
	console.log("added: "+values);
	//return confirm(values.length > 1 ? 'Are you sure you want to add these ' + values.length + ' items?' : 'Are you sure you want to add "' + values[0] + '"?');
      }
    });
    var control = select[0].selectize;

    cj('#button-clear').on('click', function() {
      control.clear();
    });

    // cj('#button-clearoptions').on('click', function() {
    //   control.clearOptions();
    // });

    cj('#button-addoption').on('click', function() {
      control.addOption({
	id: 4000,
	parent: 292,
	name: 'Something New',
	path: ['http://google.com']
      });
    });

    cj('#button-additem').on('click', function() {
      control.addItem(2);
    });

    cj('#button-setvalue').on('click', function() {
      control.setValue([2, 3]);
    });
    </script>
  </div>
</div>
</body>
</html>


