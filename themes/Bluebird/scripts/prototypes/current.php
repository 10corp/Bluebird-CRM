<html>
<head>
    <title>Current Production Tagging</title>
    <style type="text/css" media="all">
        @import url("/modules/system/system.base.css?mwmgvm");
        @import url("/modules/system/system.menus.css?mwmgvm");
        @import url("/modules/system/system.messages.css?mwmgvm");
        @import url("/modules/system/system.theme.css?mwmgvm");
        @import url("/modules/field/theme/field.css?mwmgvm");
        @import url("/modules/node/node.css?mwmgvm");
        @import url("/modules/search/search.css?mwmgvm");
        @import url("/modules/user/user.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/packages/jquery/css/jquery.autocomplete.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/packages/jquery/css/menu.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/packages/jquery/css/token-input-facebook.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/packages/jquery/jquery-ui-1.9.0/css/smoothness/jquery-ui-1.9.0.custom.min.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/packages/jquery/plugins/DataTables/media/css/demo_table_jui.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/css/civicrm.css?mwmgvm");
        @import url("/sites/all/modules/civicrm/css/extras.css?mwmgvm");
    </style>
    <style type="text/css" media="screen,projection">
        @import url("/sites/default/themes/Bluebird/css/Bluebird.css?mwmgvm");
        @import url("/sites/default/themes/Bluebird/nyss_skin/tags/tags.css");

    </style>
    <script type="text/javascript" src="/misc/jquery.js?v=1.4.4"></script>
    <script type="text/javascript" src="/misc/jquery.once.js?v=1.2"></script>
    <script type="text/javascript" src="/misc/drupal.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/jquery-1.8.3.min.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/jquery-ui-1.9.0/js/jquery-ui-1.9.0.custom.min.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.autocomplete.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.menu.pack.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.chainedSelects.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.tableHeader.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.textarearesizer.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.form.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.tokeninput.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.timeentry.pack.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.mousewheel.pack.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/NYSS/jquery.toolTip.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/DataTables/media/js/jquery.dataTables.min.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.FormNavigate.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.validate.min.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.ui.datepicker.validation.pack.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery-fieldselection.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.jeditable.mini.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.blockUI.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.notify.min.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jquery.redirect.min.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/js/rest.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/js/Common.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/js/jquery/jquery.crmeditable.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/js/jquery/jquery.crmasmselect.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/NYSS/jquery.cursorStart.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/packages/jquery/plugins/jstree/jquery.jstree.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/all/modules/civicrm/js/noconflict.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/message-manager.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/civi-header.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/general.js?mwmgvm"></script>
    <script type="text/javascript" src="/sites/default/themes/Bluebird/scripts/bbtree.js"></script>




</head>
<body>
<div class="container" style="padding-top: 25px;">
<div class="clear span-24 main-container">
<div id="crm-container" class="crm-container crm-accordion-processed" lang="en" xml:lang="en">
  <div class="crm-block crm-content-block crm-contact-page crm-inline-edit-container crm-edit-ready">
      <div id="mainTabContainer" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
          <ul class="crm-contact-tabs-list ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
              <li id="tab_summary" class="crm-tab-button ui-state-default ui-corner-top ui-corner-bottom" role="tab" tabindex="-1" aria-controls="contact-summary" aria-labelledby="ui-id-1" aria-selected="false">
                <a href="#" title="Summary" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-1">
                <span> </span> Summary                <em>&nbsp;</em>
                </a>
              </li>
              <li id="tab_activity" class="crm-tab-button crm-count- ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Activities" aria-labelledby="ui-id-2" aria-selected="false">
                <a href="#" title="Activities" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">
                  <span> </span> Activities
                  <em></em>
                <em>0</em></a>
              </li>
              <li id="tab_case" class="crm-tab-button crm-count-0 ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Cases" aria-labelledby="ui-id-3" aria-selected="false">
                <a href="#" title="Cases" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-3">
                  <span> </span> Cases
                  <em>0</em>
                </a>
              </li>
              <li id="tab_mailing" class="crm-tab-button crm-count-0 ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Mailings" aria-labelledby="ui-id-4" aria-selected="false">
                <a href="#" title="Mailings" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-4">
                  <span> </span> Mailings
                  <em>0</em>
                </a>
              </li>
              <li id="tab_rel" class="crm-tab-button crm-count-0 ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Relationships" aria-labelledby="ui-id-5" aria-selected="false">
                <a href="#" title="Relationships" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-5">
                  <span> </span> Relationships
                  <em>0</em>
                </a>
              </li>
              <li id="tab_group" class="crm-tab-button crm-count-0 ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Groups" aria-labelledby="ui-id-6" aria-selected="false">
                <a href="#" title="Groups" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-6">
                  <span> </span> Groups
                  <em>0</em>
                </a>
              </li>
              <li id="tab_note" class="crm-tab-button crm-count-0 ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Notes" aria-labelledby="ui-id-7" aria-selected="false">
                <a href="#" title="Notes" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-7">
                  <span> </span> Notes
                  <em>0</em>
                </a>
              </li>
              <li id="tab_tag" class="crm-tab-button crm-count-0 ui-state-default ui-corner-top ui-corner-bottom disabled ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="Tags" aria-labelledby="ui-id-8" aria-selected="true">
                <a href="#" title="Tags" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-8">
                  <span> </span> Tags
                  <em>0</em>
                </a>
              </li>
              <li id="tab_log" class="crm-tab-button crm-count- ui-state-default ui-corner-top ui-corner-bottom disabled" role="tab" tabindex="-1" aria-controls="Change_Log" aria-labelledby="ui-id-9" aria-selected="false">
                <a href="#" title="Change Log" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-9">
                  <span> </span> Change Log
                  <em></em>
                  <em>3</em></a>
              </li>
          </ul>

        <div id="Tags" class="ui-tabs-panel ui-widget-content ui-corner-bottom" aria-live="polite" aria-labelledby="ui-id-8" role="tabpanel" aria-expanded="true" aria-hidden="false" style="display: block;">
            <div class="crm-container-snippet" bgcolor="white">
                <div id="tagSelect" class="crm-block crm-content-block">
                    <div id="TagGroups" class="view-content">
                        <h3>Tags</h3>
                        <div id="crm-tagListWrap">
                          <div class="crm-section tag-section contact-tagset-296-section">
                            <div class="tag-label">
                              <label>Keywords</label>
                            </div>
                            <div class="content">
                              &nbsp;
                              <input type="hidden" name="contact_taglist[296]" value="" id="contact_taglist_296" />
                              <script type="text/javascript">

                                  var tagUrl = "/civicrm/ajax/taglist?parentId=296&key=459191e4b5403730b0af7a496ac52055";
                                  var contactEntityTags = '';

                                  //NYSS
                                  var hintText = "Begin typing a tag name.";

                                  cj( ".contact-tagset-296-section:not(.crm-processed-input) input")
                                    .addClass("contact-taglist_296");
                                  cj( ".contact-tagset-296-section:not(.crm-processed-input) .contact-taglist_296"  )
                                    .tokenInput( tagUrl, {
                                      prePopulate: contactEntityTags,
                                      theme: 'facebook',
                                      hintText: hintText,
                                      onAdd: function ( item ) {
                                        processContactTags_296( 'select', item.id );

                                        //NYSS update count of tags in summary tab
                                        if ( cj( '.ui-tabs-nav #tab_tag a' ).length ) {
                                          var tagCount = cj('.ui-tabs-nav #tab_tag a em').html();
                                          tagCount++;
                                          cj( '.ui-tabs-nav #tab_tag a em' ).html(tagCount);
                                        }
                                      },
                                      onDelete: function ( item ) {
                                        processContactTags_296( 'delete', item.id );
                                        //NYSS update count of tags in summary tab
                                        if ( cj( '.ui-tabs-nav #tab_tag a' ).length ) {
                                          var tagCount = cj('.ui-tabs-nav #tab_tag a em').html();
                                          tagCount--;
                                          cj( '.ui-tabs-nav #tab_tag a em' ).html(tagCount);
                                        }
                                      }
                                    }
                                  );

                                  cj( ".contact-tagset-296-section:not(.crm-processed-input)").addClass("crm-processed-input");

                                  function processContactTags_296( action, id ) {
                                    var postUrl          = "/civicrm/ajax/processTags";
                                    var parentId         = "296";
                                    var entityId         = "3550";
                                    var entityTable      = "civicrm_contact";
                                    var skipTagCreate    = "";
                                    //NYSS
                                    var skipEntityAction = "0";

                                    cj.post( postUrl, { action: action, tagID: id, parentId: parentId, entityId: entityId, entityTable: entityTable,
                                      skipTagCreate: skipTagCreate, skipEntityAction: skipEntityAction, key: "3bbd3ba7c057828fc6e35045fbe32394" },
                                      function ( response ) {
                                        // update hidden element
                                        if ( response.id ) {
                                          var curVal   = cj( ".contact-taglist_296" ).val( );
                                          var valArray = curVal.split(',');
                                          var setVal   = Array( );
                                          if ( response.action == 'delete' ) {
                                            for ( x in valArray ) {
                                              if ( valArray[x] != response.id ) {
                                                setVal[x] = valArray[x];
                                              }
                                            }
                                            CRM.alert('', 'Removed', 'success');
                                          }
                                          else {
                                            CRM.alert('', 'Saved', 'success');
                                          }
                                          if ( response.action == 'select' ) {
                                            setVal    = valArray;
                                            setVal[ setVal.length ] = response.id;
                                          }

                                          var actualValue = setVal.join( ',' );
                                          cj( ".contact-taglist_296" ).val( actualValue );
                                        }
                                        // update contact summary tab
                                        if (CRM.updateContactSummaryTags) {
                                          CRM.updateContactSummaryTags();
                                        }
                                      },
                                    "json" );
                                  }

                                </script>

                                </div>
                                <div class="clear"></div>
                            </div>
                          <div class="crm-section tag-section contact-tagset-296-section">
                            <div id="BBTreeContainer" class="BB_default">

                                 <div class="tag-label">
                                    <label>Issue Codes</label>
                                </div>
                                <div class="content">
                                  <input type="text" autocomplete="off" maxlength="64" id="issue-code-search" />
                                  <div id="issue-code-results" class="TreeWrap"></div>


                                  <script type="text/javascript">
                                  var tree = new TagTreeTag({
                                    tree_container: cj('#issue-code-results'),
                                    filter_bar: cj('#issue-code-search'),
                                    tag_trees: [291],
                                    default_tree: 291,

                                    auto_save: false,
                                    entity_id: cj('#contact_tag_ids').val(),
                                    entity_counts: false,
                                    entity_type: 'civicrm_contact',
                                  });
                                  tree.load();
                                  </script>
                                </div>
                              </div>
                              <div class="clear"></div>


                            </div>
                            <div class="crm-section tag-section contact-tagset-292-section">
                              <div class="tag-label">
                                <label>Positions</label>
                              </div>
                              <div class="content">
                                &nbsp;
                                <input type="hidden" name="contact_taglist[292]" value="" id="contact_taglist_292" />
                                <script type="text/javascript">
                                  var tagUrl = "/civicrm/ajax/taglist?parentId=292&key=459191e4b5403730b0af7a496ac52055";
                                  var contactEntityTags = '';

                                   //NYSS
                                  var hintText = "Begin typing a tag name.";

                                  cj( ".contact-tagset-292-section:not(.crm-processed-input) input")
                                    .addClass("contact-taglist_292");
                                  cj( ".contact-tagset-292-section:not(.crm-processed-input) .contact-taglist_292"  )
                                    .tokenInput( tagUrl, {
                                      prePopulate: contactEntityTags,
                                      theme: 'facebook',
                                      hintText: hintText,
                                      onAdd: function ( item ) {
                                        processContactTags_292( 'select', item.id );

                                        //NYSS update count of tags in summary tab
                                        if ( cj( '.ui-tabs-nav #tab_tag a' ).length ) {
                                          var tagCount = cj('.ui-tabs-nav #tab_tag a em').html();
                                          tagCount++;
                                          cj( '.ui-tabs-nav #tab_tag a em' ).html(tagCount);
                                        }
                                      },
                                      onDelete: function ( item ) {
                                        processContactTags_292( 'delete', item.id );
                                        //NYSS update count of tags in summary tab
                                        if ( cj( '.ui-tabs-nav #tab_tag a' ).length ) {
                                          var tagCount = cj('.ui-tabs-nav #tab_tag a em').html();
                                          tagCount--;
                                          cj( '.ui-tabs-nav #tab_tag a em' ).html(tagCount);
                                        }
                                      }
                                    }
                                  );

                                  cj( ".contact-tagset-292-section:not(.crm-processed-input)").addClass("crm-processed-input");

                                  function processContactTags_292( action, id ) {
                                    var postUrl          = "/civicrm/ajax/processTags";
                                    var parentId         = "292";
                                    var entityId         = "3550";
                                    var entityTable      = "civicrm_contact";
                                    var skipTagCreate    = "";
                                    //NYSS
                                    var skipEntityAction = "";

                                    cj.post( postUrl, { action: action, tagID: id, parentId: parentId, entityId: entityId, entityTable: entityTable,
                                      skipTagCreate: skipTagCreate, skipEntityAction: skipEntityAction, key: "3bbd3ba7c057828fc6e35045fbe32394" },
                                      function ( response ) {
                                        // update hidden element
                                        if ( response.id ) {
                                          var curVal   = cj( ".contact-taglist_292" ).val( );
                                          var valArray = curVal.split(',');
                                          var setVal   = Array( );
                                          if ( response.action == 'delete' ) {
                                            for ( x in valArray ) {
                                              if ( valArray[x] != response.id ) {
                                                setVal[x] = valArray[x];
                                              }
                                            }
                                            CRM.alert('', 'Removed', 'success');
                                          }
                                          else {
                                            CRM.alert('', 'Saved', 'success');
                                          }
                                          if ( response.action == 'select' ) {
                                            setVal    = valArray;
                                            setVal[ setVal.length ] = response.id;
                                          }

                                          var actualValue = setVal.join( ',' );
                                          cj( ".contact-taglist_292" ).val( actualValue );
                                        }
                                        // update contact summary tab
                                        if (CRM.updateContactSummaryTags) {
                                          CRM.updateContactSummaryTags();
                                        }
                                      },
                                    "json" );
                                  }

                                </script>
                              </div>
                            <div class="clear"></div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>
  </div>
</div>
</body>
</html>
