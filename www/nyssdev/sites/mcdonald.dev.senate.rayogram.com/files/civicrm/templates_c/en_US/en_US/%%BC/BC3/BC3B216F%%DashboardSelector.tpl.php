<?php /* Smarty version 2.6.26, created on 2010-07-07 15:46:35
         compiled from CRM/Case/Page/DashboardSelector.tpl */ ?>
<?php require_once(SMARTY_CORE_DIR . 'core.load_plugins.php');
smarty_core_load_plugins(array('plugins' => array(array('block', 'ts', 'CRM/Case/Page/DashboardSelector.tpl', 26, false),array('function', 'counter', 'CRM/Case/Page/DashboardSelector.tpl', 41, false),array('function', 'crmURL', 'CRM/Case/Page/DashboardSelector.tpl', 63, false),array('modifier', 'crmDate', 'CRM/Case/Page/DashboardSelector.tpl', 80, false),)), $this); ?>
<?php ob_start(); ?><img src="<?php echo $this->_tpl_vars['config']->resourceBase; ?>
i/TreePlus.gif" alt="<?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?>open section<?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?>"/><?php $this->_smarty_vars['capture']['default'] = ob_get_contents();  $this->assign('expandIconURL', ob_get_contents());ob_end_clean(); ?>
<?php echo '<table class="caseSelector"><tr class="columnheader"><th></th><th>'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Client'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '</th><th>'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Status'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '</th><th>'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Type'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '</th><th>'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'My Role'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '</th><th>'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Case Manager'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '</th><th>'; ?><?php if ($this->_tpl_vars['list'] == 'upcoming'): ?><?php echo ''; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Next Sched.'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo ''; ?><?php else: ?><?php echo ''; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Most Recent'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo ''; ?><?php endif; ?><?php echo '</th><th></th></tr>'; ?><?php echo smarty_function_counter(array('start' => 0,'skip' => 1,'print' => false), $this);?><?php echo ''; ?><?php $_from = $this->_tpl_vars['rows']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array'); }if (count($_from)):
    foreach ($_from as $this->_tpl_vars['row']):
?><?php echo '<tr id=\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo 'Rowid'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '\' class="crm-case crm-case_'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '"><td>'; ?><?php echo '<span id="'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_show"><a href="#" onclick="show(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo 'CaseDetails'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '\', \'table-row\');'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo 'CaseDetails(\''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '\',\''; ?><?php echo $this->_tpl_vars['row']['contact_id']; ?><?php echo '\');hide(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_show\');show(\'minus'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide\');show(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide\',\'table-row\');return false;"><img src="'; ?><?php echo $this->_tpl_vars['config']->resourceBase; ?><?php echo 'i/TreePlus.gif" class="action-icon" alt="'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'open section'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '"/></a></span><span id="minus'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide"><a href="#" onclick="hide(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo 'CaseDetails'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '\');show(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_show\', \'table-row\');hide(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide\');hide(\'minus'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide\');return false;"><img src="'; ?><?php echo $this->_tpl_vars['config']->resourceBase; ?><?php echo 'i/TreeMinus.gif" class="action-icon" alt="'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'open section'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '"/></a></td><td class="crm-case-phone"><a href="'; ?><?php echo CRM_Utils_System::crmURL(array('p' => 'civicrm/contact/view','q' => "reset=1&cid=".($this->_tpl_vars['row']['contact_id'])), $this);?><?php echo '">'; ?><?php echo $this->_tpl_vars['row']['sort_name']; ?><?php echo '</a>'; ?><?php if ($this->_tpl_vars['row']['phone']): ?><?php echo '<br /><span class="description">'; ?><?php echo $this->_tpl_vars['row']['phone']; ?><?php echo '</span>'; ?><?php endif; ?><?php echo '<br /><span class="description">'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Case ID'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo ': '; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '</span></td><td class="'; ?><?php echo $this->_tpl_vars['row']['class']; ?><?php echo ' crm-case-case_status">'; ?><?php echo $this->_tpl_vars['row']['case_status']; ?><?php echo '</td><td class="crm-case-case_type">'; ?><?php echo $this->_tpl_vars['row']['case_type']; ?><?php echo '</td><td class="crm-case-case_role">'; ?><?php if ($this->_tpl_vars['row']['case_role']): ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_role']; ?><?php echo ''; ?><?php else: ?><?php echo '---'; ?><?php endif; ?><?php echo '</td><td class="crm-case-casemanager">'; ?><?php if ($this->_tpl_vars['row']['casemanager_id']): ?><?php echo '<a href="'; ?><?php echo CRM_Utils_System::crmURL(array('p' => 'civicrm/contact/view','q' => "reset=1&cid=".($this->_tpl_vars['row']['casemanager_id'])), $this);?><?php echo '">'; ?><?php echo $this->_tpl_vars['row']['casemanager']; ?><?php echo '</a>'; ?><?php else: ?><?php echo '---'; ?><?php endif; ?><?php echo '</td>'; ?><?php if ($this->_tpl_vars['list'] == 'upcoming'): ?><?php echo '<td class="crm-case-case_scheduled_activity">'; ?><?php if ($this->_tpl_vars['row']['case_upcoming_activity_viewable']): ?><?php echo '<a href="javascript:viewActivity('; ?><?php echo $this->_tpl_vars['row']['case_scheduled_activity_id']; ?><?php echo ', '; ?><?php echo $this->_tpl_vars['row']['contact_id']; ?><?php echo ');" title="'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'View this activity.'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '">'; ?><?php echo $this->_tpl_vars['row']['case_scheduled_activity_type']; ?><?php echo '</a>'; ?><?php else: ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_scheduled_activity_type']; ?><?php echo ''; ?><?php endif; ?><?php echo '&nbsp;&nbsp;'; ?><?php if ($this->_tpl_vars['row']['case_upcoming_activity_editable']): ?><?php echo '<a href="'; ?><?php echo CRM_Utils_System::crmURL(array('p' => "civicrm/case/activity",'q' => "reset=1&cid=".($this->_tpl_vars['row']['contact_id'])."&caseid=".($this->_tpl_vars['row']['case_id'])."&action=update&id=".($this->_tpl_vars['row']['case_scheduled_activity_id'])), $this);?><?php echo '" title="'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Edit this activity.'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '"><span class="icon edit-icon"></span></a>'; ?><?php endif; ?><?php echo '<br />'; ?><?php echo ((is_array($_tmp=$this->_tpl_vars['row']['case_scheduled_activity_date'])) ? $this->_run_mod_handler('crmDate', true, $_tmp) : smarty_modifier_crmDate($_tmp)); ?><?php echo '</td>'; ?><?php elseif ($this->_tpl_vars['list'] == 'recent'): ?><?php echo '<td class="crm-case-case_recent_activity">'; ?><?php if ($this->_tpl_vars['row']['case_recent_activity_viewable']): ?><?php echo '<a href="javascript:viewActivity('; ?><?php echo $this->_tpl_vars['row']['case_recent_activity_id']; ?><?php echo ', '; ?><?php echo $this->_tpl_vars['row']['contact_id']; ?><?php echo ');" title="'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'View this activity.'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '">'; ?><?php echo $this->_tpl_vars['row']['case_recent_activity_type']; ?><?php echo '</a>'; ?><?php else: ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_recent_activity_type']; ?><?php echo ''; ?><?php endif; ?><?php echo ''; ?><?php if ($this->_tpl_vars['row']['case_recent_activity_editable'] && $this->_tpl_vars['row']['case_recent_activity_type_name'] != 'Inbound Email' && $this->_tpl_vars['row']['case_recent_activity_type_name'] != 'Email'): ?><?php echo '&nbsp;&nbsp;<a href="'; ?><?php echo CRM_Utils_System::crmURL(array('p' => "civicrm/case/activity",'q' => "reset=1&cid=".($this->_tpl_vars['row']['contact_id'])."&caseid=".($this->_tpl_vars['row']['case_id'])."&action=update&id=".($this->_tpl_vars['row']['case_recent_activity_id'])), $this);?><?php echo '" title="'; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Edit this activity.'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '"><span class="icon edit-icon"></span></a>'; ?><?php endif; ?><?php echo '<br />'; ?><?php echo ((is_array($_tmp=$this->_tpl_vars['row']['case_recent_activity_date'])) ? $this->_run_mod_handler('crmDate', true, $_tmp) : smarty_modifier_crmDate($_tmp)); ?><?php echo '</td>'; ?><?php endif; ?><?php echo '<td>'; ?><?php echo $this->_tpl_vars['row']['action']; ?><?php echo '</td></tr><tr id="'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide" class="crm-case_'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '"><td></td><td colspan="7" width="99%" class="enclosingNested crm-case_'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '"><div id="'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo 'CaseDetails'; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '"></div></td></tr><script type="text/javascript">hide(\''; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide\');hide(\'minus'; ?><?php echo $this->_tpl_vars['list']; ?><?php echo ''; ?><?php echo $this->_tpl_vars['row']['case_id']; ?><?php echo '_hide\');</script>'; ?><?php endforeach; endif; unset($_from); ?><?php echo ''; ?><?php echo ''; ?><?php if ($this->_tpl_vars['context'] == 'dashboard' && $this->_tpl_vars['limit'] && $this->_tpl_vars['pager']->_totalItems > $this->_tpl_vars['limit']): ?><?php echo '<tr class="even-row"><td colspan="10"><a href="'; ?><?php echo CRM_Utils_System::crmURL(array('p' => 'civicrm/case/search','q' => 'reset=1'), $this);?><?php echo '">&raquo; '; ?><?php $this->_tag_stack[] = array('ts', array()); $_block_repeat=true;smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], null, $this, $_block_repeat);while ($_block_repeat) { ob_start(); ?><?php echo 'Find more cases'; ?><?php $_block_content = ob_get_contents(); ob_end_clean(); $_block_repeat=false;echo smarty_block_ts($this->_tag_stack[count($this->_tag_stack)-1][1], $_block_content, $this, $_block_repeat); }  array_pop($this->_tag_stack); ?><?php echo '... </a></td></tr>'; ?><?php endif; ?><?php echo '</table>'; ?>


<?php echo '
<script type="text/javascript">

function '; ?>
<?php echo $this->_tpl_vars['list']; ?>
<?php echo 'CaseDetails( caseId, contactId )
{

  var dataUrl = '; ?>
"<?php echo CRM_Utils_System::crmURL(array('p' => 'civicrm/case/details','h' => 0,'q' => 'snippet=4&caseId='), $this);?>
<?php echo '" + caseId +\'&cid=\' + contactId;
  cj.ajax({
            url     : dataUrl,
            dataType: "html",
            timeout : 5000, //Time in milliseconds
            success : function( data ){
                           cj( \'#'; ?>
<?php echo $this->_tpl_vars['list']; ?>
<?php echo 'CaseDetails\' + caseId ).html( data );
                      },
            error   : function( XMLHttpRequest, textStatus, errorThrown ) {
                              console.error( \'Error: \'+ textStatus );
                    }
         });
}
</script>
'; ?>
