<?php 

function nyss_mail_civicrm_buildForm( $formName, &$form ) {

//if ( $_GET['smartyDebug'] == 1 ) { CRM_Core_Error::debug($form); }

	if ( $formName == 'CRM_Mailing_Form_Test' ) {
		
		$form->add('text','creator_initials',ts('Initials'));
		
		require_once 'CRM/Mailing/Info.php';
        if ( CRM_Mailing_Info::workflowEnabled( ) ) {
            if ( ! CRM_Core_Permission::check( 'schedule mailings' ) &&
                 CRM_Core_Permission::check( 'create mailings' ) ) {
                $form->addRule('creator_initials', ts('You must verify content and enter your initials.'), 'required', null, 'client');
            }
        }
		
	}

//if ( $_GET['smartyDebug'] == 1 ) { CRM_Core_Error::debug($form); }

} //end buildForm

function nyss_mail_civicrm_postProcess( $formName, &$form ) {

	if ( $formName == 'CRM_Mailing_Form_Test' ) {
		//CRM_Core_Error::debug($form); exit();
	}
	
} //end postProcess

function nyss_mail_civicrm_post( $op, $objectName, $objectId, &$objectRef ) {

	/*if ( $_GET['smartyDebug'] == 1 ) {
	  CRM_Core_Error::debug($op);
	  CRM_Core_Error::debug($objectName);
	  CRM_Core_Error::debug($objectId);
	  CRM_Core_Error::debug($objectRef); 
	  exit();
	}*/

}
